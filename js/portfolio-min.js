function playBar(){var o=0,t=$(".rate_bar_item").not(".avg").length;$(".portfolio_bar.active").find(".rate_bar_item").each(function(e){var i=parseInt($(this).attr("data-rate-percent"));if(o=$(this).hasClass("avg")?o:o+i,$(this).hasClass("avg")){var n=o/t;i=Math.ceil(n)}0!==i?$(this).find(".rate_bar_fill_inner").delay(200+200*e).animate({width:i+"%"},1e3).find(".rate_percent").text(i+"%"):$(this).find(".rate_bar_fill_inner").css({background:"#eee",width:"100%"}).find(".rate_percent").css({color:"#888"}).text("NOTHING")})}function cancelBar(){$(".rate_bar_fill_inner").removeAttr("style")}function scrollMove(){var o=$(window).scrollTop(),t=$(".contents").offset().top-$(".sticky_header").height();o>t&&$("html, body").clearQueue().animate({scrollTop:t},500,"easeInOutCirc")}function closePortfolio(){var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"},t=o[Modernizr.prefixed("transition")];$(".portfolio_cont_inner").removeAttr("style"),$(".close_portfolio_fixed").removeClass("active"),$(".portfolio_cont_inner_inner").removeClass("active").one(t,function(){$(".portfolio_bar").removeClass("active"),cancelBar()})}function getHashFilter(){var o=location.hash.match(/filter=([^&]+)/i),t=o&&o[1];return t&&decodeURIComponent(t)}function removeContetns(){$(".pp_data").empty()}function colorFill(){$(".color_circle").each(function(){var o=$(this).siblings(".color_title").text();$(this).css("background",o)})}function heightAdjust(){var o=$(".portfolio_cont_inner_inner").hasClass("active"),t=$(".portfolio_detail_contents").outerHeight(),e=$(".portfolio_list").height(),i=t>e?t:e;!0===o?$(".portfolio_cont_inner").css("height",t):$(".portfolio_cont_inner").css("height",e)}function ajaxCallPP(){var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"},t=o[Modernizr.prefixed("transition")];$(".close_portfolio_fixed").addClass("active"),$(".portfolio_cont_inner_inner").addClass("active").one(t,function(){$(".portfolio_bar").addClass("active"),playBar(),scrollMove(),setTimeout(function(){$(".portfolio_item").removeClass("loading"),heightAdjust()},500)}),$(".portfolio_item").removeClass("loading")}function openPortfolio(o){var t="./portfolio/"+o,e="./portfolio/"+o+"/index.html";$.ajax({type:"GET",url:e,dataType:"html",success:function(o){removeContetns();var e=$(o);e.find("img").each(function(){var o=$(this).attr("src").split("/"),e=o[o.length-1];$(this).attr("src",t+"/"+e)}),$(".pp_data").append(e).imagesLoaded().then(function(){colorFill(),ajaxCallPP()})},complete:function(o){},error:function(o,t,e){alert("웹사이트가 원활하지 않습니다."),window.history.back()}})}function getPage(){var o=location.href.match(/page=([^&]+)/i),t=o&&o[1];return t&&decodeURIComponent(t)}$(".img_portfolio").each(function(){var o=$(this).attr("src");$(this).parent().css({"background-repeat":"no-repeat","background-position":"center","background-size":"cover","background-image":"url("+o+")"})}),$(".portfolio_closer, .close_portfolio_fixed").click(function(){closePortfolio()}),$(function(){function o(){closePortfolio(),$(".portfolio_message").removeClass("active");var o=getHashFilter();o=null===o?"*":o.split("?")[0];var n=$(".portfolio_category").find('li[data-filter="'+o+'"]').text().trim();$(".category_display").text(n),!o&&i||(i=!0,t.isotope({itemSelector:".portfolio_item",filter:o}),o&&(e.find(".is-checked").removeClass("is-checked"),e.find('[data-filter="'+o+'"]').addClass("is-checked")))}var t=$(".grid"),e=$(".portfolio_subj").on("click",".portfolio_category li",function(){closePortfolio(),$(".portfolio_message").removeClass("active");var o=$(this).attr("data-filter");location.hash="filter="+encodeURIComponent(o)});t.on("arrangeComplete",function(o,t){t.length<1&&($(".portfolio_message").addClass("active"),$(".category_name").text())});var i=!1;$(window).on("hashchange",o),o()}),$.fn.imagesLoaded=function(){var o=this.find('img[src!=""]');if(!o.length)return $.Deferred().resolve().promise();var t=[];return o.each(function(){var o=$.Deferred();t.push(o);var e=new Image;e.onload=function(){o.resolve()},e.onerror=function(){o.resolve()},e.src=this.src}),$.when.apply($,t)},$(window).resize(function(){heightAdjust()}),$(function(){function o(){var o=getPage();!o&&n||(n=!0,o&&openPortfolio(o))}var t=!0,e=$(".portfolio_list").on("click",".portfolio_item",function(){if(!0===t){t=!1,$(this).addClass("loading");var o=$(this).attr("data-pp-id"),e=location.hash.split("?")[0];location.hash=e+"?page="+encodeURIComponent(o),setTimeout(function(){t=!0},3e3)}}),i=$(".portfolio_detail").on("click",".portfolio_closer",function(){var o=$(this).attr("data-page-id"),t=location.hash.split("?")[0];location.hash="#"===t?"filter=*":t}),n=!1;$(window).on("hashchange",o),o()}),$(document).mouseup(function(o){var t=$(".portfolio_subj");t.is(o.target)||0!==t.has(o.target).length?t.toggleClass("filter-on"):t.removeClass("filter-on")});